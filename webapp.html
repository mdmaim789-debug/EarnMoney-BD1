<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EarnMoney BD - ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ü‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶®</title>
    <style>
        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Noto Sans Bengali', 'Kalpurush', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
            padding-bottom: 80px;
            color: #333;
        }
        
        /* Glassmorphism Container */
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .glass-card:hover {
            transform: translateY(-5px);
        }
        
        /* Balance Display */
        .balance-container {
            text-align: center;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 25px 20px;
            margin-bottom: 25px;
        }
        
        .balance-amount {
            font-size: 48px;
            font-weight: bold;
            margin: 10px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .balance-label {
            font-size: 16px;
            opacity: 0.9;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.8;
            color: #fff;
        }
        
        /* Buttons */
        .btn {
            display: block;
            width: 100%;
            padding: 18px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 0;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        /* Task Cards */
        .task-card {
            background: rgba(255, 255, 255, 0.25);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid #667eea;
        }
        
        .task-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .task-reward {
            background: #4CAF50;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-top: 10px;
        }
        
        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        
        .form-control {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.2);
            font-size: 16px;
            color: #333;
            transition: border-color 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* Navigation Bar */
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-around;
            padding: 15px 10px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #666;
            font-size: 12px;
            transition: all 0.3s ease;
            padding: 8px;
            border-radius: 10px;
        }
        
        .nav-item.active {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        
        .nav-icon {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlide 0.3s ease;
        }
        
        @keyframes modalSlide {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* Loading */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top: 5px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Alert */
        .alert {
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            display: none;
        }
        
        .alert-success {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid #4CAF50;
            color: #2e7d32;
        }
        
        .alert-error {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid #f44336;
            color: #c62828;
        }
        
        /* Utility */
        .text-center { text-align: center; }
        .mb-10 { margin-bottom: 10px; }
        .mb-20 { margin-bottom: 20px; }
        .mt-20 { margin-top: 20px; }
        .p-20 { padding: 20px; }
        
        /* Responsive */
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .balance-amount {
                font-size: 36px;
            }
        }
        
        /* Admin Styles */
        .admin-table {
            width: 100%;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            overflow: hidden;
        }
        
        .admin-table th {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            text-align: left;
            color: white;
        }
        
        .admin-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="nav-bar">
        <a href="#" class="nav-item active" onclick="showSection('home')">
            <span class="nav-icon">üè†</span>
            <span>‡¶π‡ßã‡¶Æ</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('earn')">
            <span class="nav-icon">üéÅ</span>
            <span>‡¶Ü‡¶Ø‡¶º</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('referral')">
            <span class="nav-icon">üë•</span>
            <span>‡¶∞‡ßá‡¶´‡¶æ‡¶∞</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('wallet')">
            <span class="nav-icon">üí∞</span>
            <span>‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶ü</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('withdraw')">
            <span class="nav-icon">üí∏</span>
            <span>‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('profile')">
            <span class="nav-icon">üë§</span>
            <span>‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</span>
        </a>
    </div>

    <!-- Main Container -->
    <div id="main-container">
        <!-- Home Section -->
        <div id="home-section" class="section active">
            <div class="glass-card balance-container">
                <div class="balance-label">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</div>
                <div class="balance-amount" id="balance">0‡ß≥</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="today-earnings">0‡ß≥</div>
                        <div class="stat-label">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Ü‡¶Ø‡¶º</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="ads-watched">0</div>
                        <div class="stat-label">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="referral-count">0</div>
                        <div class="stat-label">‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="login-streak">0</div>
                        <div class="stat-label">‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶ï</div>
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <h3>‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ü‡¶Ø‡¶º</h3>
                <button class="btn btn-success mb-10" onclick="watchAd()">
                    üì∫ ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßá ‡¶Ü‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶® (5‡ß≥)
                </button>
                <button class="btn btn-primary" onclick="showSection('tasks')">
                    üìã ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>

            <div class="glass-card">
                <h3>‡¶Ü‡¶Ø‡¶º‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</h3>
                <div class="progress-container">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®:</span>
                        <span id="ads-progress">0/10</span>
                    </div>
                    <div style="height: 10px; background: rgba(255,255,255,0.2); border-radius: 5px; overflow: hidden;">
                        <div id="ads-progress-bar" style="height: 100%; background: #4CAF50; width: 0%; transition: width 0.5s ease;"></div>
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <h3>‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶Ü‡¶Ø‡¶º</h3>
                <div id="recent-earnings">
                    <p class="text-center" style="opacity: 0.7;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                </div>
            </div>
        </div>

        <!-- Earn Section -->
        <div id="earn-section" class="section" style="display: none;">
            <div class="glass-card">
                <h2>üéÅ ‡¶Ü‡¶Ø‡¶º ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶â‡¶™‡¶æ‡¶Ø‡¶º</h2>
                <p>‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶â‡¶™‡¶æ‡¶Ø‡¶º‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ü‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶®</p>
            </div>

            <!-- Watch Ads -->
            <div class="glass-card">
                <h3>üì∫ ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</h3>
                <p>‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßá ‡¶™‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡¶®: <strong>5‡ß≥</strong></p>
                <p>‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü: <strong>10 ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®</strong></p>
                <p>‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶®: <strong>60 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°</strong></p>
                
                <div class="mt-20">
                    <button class="btn btn-success" onclick="watchAd()" id="ad-button">
                        ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (5‡ß≥)
                    </button>
                    <div id="ad-timer" style="display: none; text-align: center; margin-top: 10px;">
                        <p>‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®: <span id="countdown">60</span>s</p>
                    </div>
                </div>
            </div>

            <!-- Tasks -->
            <div class="glass-card">
                <h3>üìã ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <p>‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                <div id="tasks-list">
                    <p class="text-center" style="opacity: 0.7;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                </div>
            </div>
        </div>

        <!-- Referral Section -->
        <div id="referral-section" class="section" style="display: none;">
            <div class="glass-card">
                <h2>üë• ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ</h2>
                <p>‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤‡ßá ‡¶™‡¶æ‡¶® <strong>10‡ß≥</strong></p>
            </div>

            <div class="glass-card">
                <h3>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶≤‡¶ø‡¶Ç‡¶ï</h3>
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
                    <code id="referral-link" style="word-break: break-all; color: white;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</code>
                </div>
                <button class="btn btn-primary" onclick="copyReferralLink()">
                    üìã ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>

            <div class="glass-card">
                <h3>‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="total-refs">0</div>
                        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="active-refs">0</div>
                        <div class="stat-label">‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="ref-earnings">0‡ß≥</div>
                        <div class="stat-label">‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶Ü‡¶Ø‡¶º</div>
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <h3>‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ</h3>
                <ul style="padding-left: 20px; margin: 10px 0;">
                    <li>‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤: 10‡ß≥</li>
                    <li>‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤‡¶ï‡ßá ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá</li>
                    <li>‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤‡¶ï‡ßá ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá 1 ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ü‡¶Ø‡¶º ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá</li>
                    <li>‡¶´‡ßá‡¶ï ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶°‡¶ø‡¶ü‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡¶≤‡ßá ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¨‡¶®‡ßç‡¶ß</li>
                </ul>
            </div>
        </div>

        <!-- Wallet Section -->
        <div id="wallet-section" class="section" style="display: none;">
            <div class="glass-card balance-container">
                <div class="balance-label">‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶ü ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶∞‡¶ø</div>
                <div class="balance-amount" id="wallet-balance">0‡ß≥</div>
            </div>

            <div class="glass-card">
                <h3>üí∞ ‡¶Ü‡¶Ø‡¶º‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="total-earned">0‡ß≥</div>
                        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶Ü‡¶Ø‡¶º</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="total-withdrawn">0‡ß≥</div>
                        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</div>
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <h3>üìä ‡¶Ü‡¶Ø‡¶º‡ßá‡¶∞ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó</h3>
                <div style="margin: 15px 0;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®:</span>
                        <span id="ad-earnings">0‡ß≥</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>‡¶ü‡¶æ‡¶∏‡ßç‡¶ï:</span>
                        <span id="task-earnings">0‡ß≥</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤:</span>
                        <span id="ref-wallet-earnings">0‡ß≥</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>‡¶¨‡ßã‡¶®‡¶æ‡¶∏:</span>
                        <span id="bonus-earnings">0‡ß≥</span>
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <h3>üìú ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</h3>
                <button class="btn" onclick="loadHistory('earnings')">‡¶Ü‡¶Ø‡¶º‡ßá‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</button>
                <button class="btn" onclick="loadHistory('withdrawals')">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</button>
                <div id="history-content" class="mt-20"></div>
            </div>
        </div>

        <!-- Withdraw Section -->
        <div id="withdraw-section" class="section" style="display: none;">
            <div class="glass-card">
                <h2>üí∏ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</h2>
                <p>‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®: <strong id="min-withdraw">100‡ß≥</strong></p>
                <p>‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶∏‡¶Æ‡¶Ø‡¶º: 24-48 ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</p>
            </div>

            <div class="glass-card">
                <h3>‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶´‡¶∞‡ßç‡¶Æ</h3>
                <form id="withdraw-form">
                    <div class="form-group">
                        <label class="form-label">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡ß≥)</label>
                        <input type="number" class="form-control" id="withdraw-amount" 
                               placeholder="100" min="100" step="1" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø</label>
                        <select class="form-control" id="withdraw-method" required>
                            <option value="">‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                            <option value="bkash">bKash</option>
                            <option value="nagad">Nagad</option>
                            <option value="rocket">Rocket</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</label>
                        <input type="text" class="form-control" id="withdraw-account" 
                               placeholder="01XXXXXXXXX" required>
                    </div>
                    
                    <button type="submit" class="btn btn-success">
                        ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶∞‡¶ø‡¶ï‡ßÅ‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </form>
            </div>

            <div class="glass-card">
                <h3>‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</h3>
                <div id="withdraw-history">
                    <p class="text-center" style="opacity: 0.7;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                </div>
            </div>
        </div>

        <!-- Profile Section -->
        <div id="profile-section" class="section" style="display: none;">
            <div class="glass-card text-center">
                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                          border-radius: 50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; 
                          font-size: 36px; color: white;">
                    üë§
                </div>
                <h2 id="user-name">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</h2>
                <p>User ID: <span id="user-id">---</span></p>
            </div>

            <div class="glass-card">
                <h3>üìã ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø</h3>
                <div style="margin: 15px 0;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <span>‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶Ü‡¶á‡¶°‡¶ø:</span>
                        <strong id="profile-ref-id">---</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <span>‡¶Ø‡ßã‡¶ó‡¶¶‡¶æ‡¶® ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</span>
                        <strong id="join-date">---</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <span>‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶ï:</span>
                        <strong id="profile-streak">0 ‡¶¶‡¶ø‡¶®</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ:</span>
                        <strong style="color: #4CAF50;" id="account-status">‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º</strong>
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <h3>üëë ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶§‡¶•‡ßç‡¶Ø</h3>
                <div style="margin: 15px 0;">
                    <div style="margin-bottom: 10px;">
                        <strong>‡¶®‡¶æ‡¶Æ:</strong>
                        <div id="admin-names">XT Maim !!, XT Hunter !!</div>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong>‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ:</strong>
                        <div id="admin-telegram">@cr_maim, @Huntervai1k</div>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong>WhatsApp:</strong>
                        <div id="admin-whatsapp">01833515655</div>
                    </div>
                    <div>
                        <strong>‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™:</strong>
                        <div><a href="https://t.me/+OXFzYPTSQXQ3NjVl" style="color: #667eea;">‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá ‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶®</a></div>
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <button class="btn" onclick="showTerms()">üìú ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ ‡¶ì ‡¶∂‡¶∞‡ßç‡¶§‡¶æ‡¶¨‡¶≤‡ßÄ</button>
                <button class="btn btn-danger" onclick="logout()">üö™ ‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü</button>
            </div>
        </div>
    </div>

    <!-- Alert Modal -->
    <div id="alert-modal" class="modal">
        <div class="modal-content">
            <h3 id="alert-title">‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ</h3>
            <p id="alert-message"></p>
            <button class="btn" onclick="closeAlert()" style="margin-top: 20px;">‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá</button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading" class="modal" style="display: none;">
        <div class="modal-content" style="background: transparent; box-shadow: none;">
            <div class="spinner"></div>
            <p style="text-align: center; color: white; margin-top: 20px;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
        </div>
    </div>

    <!-- Alert Container -->
    <div id="alert-container" style="position: fixed; top: 20px; left: 20px; right: 20px; z-index: 3000;"></div>

    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <script>
        // Global Variables
        let tg = window.Telegram.WebApp;
        let userData = null;
        let config = null;
        let currentUser = null;
        
        // Initialize Telegram WebApp
        tg.expand();
        tg.enableClosingConfirmation();
        tg.BackButton.hide();
        
        // Main Application
        document.addEventListener('DOMContentLoaded', async () => {
            // Show loading
            showLoading();
            
            try {
                // Initialize with Telegram data
                await initApp();
                
                // Load user data
                await loadUserData();
                
                // Setup event listeners
                setupEventListeners();
                
            } catch (error) {
                showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§');
                console.error('Initialization error:', error);
            } finally {
                hideLoading();
            }
        });
        
        async function initApp() {
            // Get initData from Telegram
            const initData = tg.initData;
            
            // Make API request to get user data
            const response = await fetch('/api/user', {
                headers: {
                    'X-Telegram-Init-Data': initData
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to authenticate');
            }
            
            const data = await response.json();
            
            if (data.success) {
                userData = data.user;
                config = data.config;
                currentUser = data;
                
                // Update UI with config
                if (config) {
                    document.getElementById('min-withdraw').textContent = config.min_withdraw + '‡ß≥';
                    document.getElementById('withdraw-amount').min = config.min_withdraw;
                }
                
                // Update admin info
                if (data.admin_info) {
                    document.getElementById('admin-names').textContent = data.admin_info.names.join(', ');
                    document.getElementById('admin-telegram').textContent = data.admin_info.telegram.join(', ');
                    document.getElementById('admin-whatsapp').textContent = data.admin_info.whatsapp;
                }
                
            } else {
                throw new Error('Authentication failed');
            }
        }
        
        async function loadUserData() {
            if (!userData) return;
            
            // Update profile
            document.getElementById('user-name').textContent = userData.first_name || 'User';
            document.getElementById('user-id').textContent = userData.telegram_id;
            document.getElementById('profile-ref-id').textContent = userData.referral_id;
            document.getElementById('join-date').textContent = new Date(userData.created_at).toLocaleDateString('bn-BD');
            
            // Update dashboard
            updateDashboard();
            
            // Load tasks
            await loadTasks();
            
            // Load recent earnings
            await loadRecentEarnings();
            
            // Load withdrawal history
            await loadWithdrawalHistory();
        }
        
        function updateDashboard() {
            if (!currentUser || !currentUser.stats) return;
            
            const stats = currentUser.stats;
            
            // Update balance and stats
            document.getElementById('balance').textContent = stats.balance + '‡ß≥';
            document.getElementById('wallet-balance').textContent = stats.balance + '‡ß≥';
            document.getElementById('today-earnings').textContent = stats.today_earnings + '‡ß≥';
            document.getElementById('ads-watched').textContent = stats.ads_watched_today;
            document.getElementById('referral-count').textContent = stats.referral_count;
            document.getElementById('login-streak').textContent = stats.login_streak + ' ‡¶¶‡¶ø‡¶®';
            document.getElementById('profile-streak').textContent = stats.login_streak + ' ‡¶¶‡¶ø‡¶®';
            
            // Update progress
            const adsProgress = stats.ads_watched_today;
            const adsLimit = config?.ad_daily_limit || 10;
            document.getElementById('ads-progress').textContent = `${adsProgress}/${adsLimit}`;
            document.getElementById('ads-progress-bar').style.width = `${(adsProgress / adsLimit) * 100}%`;
            
            // Update referral section
            document.getElementById('total-refs').textContent = stats.referral_count;
            document.getElementById('active-refs').textContent = stats.active_referrals;
            document.getElementById('ref-earnings').textContent = (stats.active_referrals * config.referral_bonus) + '‡ß≥';
            
            // Update wallet
            document.getElementById('total-earned').textContent = stats.total_earned + '‡ß≥';
            document.getElementById('total-withdrawn').textContent = stats.total_withdrawn + '‡ß≥';
            
            // Update referral link
            const botUsername = 'EarnMoneyBD_bot';
            const refLink = `https://t.me/${botUsername}?start=${userData.referral_id}`;
            document.getElementById('referral-link').textContent = refLink;
        }
        
        async function watchAd() {
            const button = document.getElementById('ad-button');
            const timerDiv = document.getElementById('ad-timer');
            const countdownSpan = document.getElementById('countdown');
            
            // Disable button
            button.disabled = true;
            button.textContent = '‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ï‡¶∞‡¶£...';
            
            try {
                const response = await fetch('/api/watch-ad', {
                    method: 'POST',
                    headers: {
                        'X-Telegram-Init-Data': tg.initData
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showAlert('‡¶∏‡¶´‡¶≤!', `‡¶Ü‡¶™‡¶®‡¶ø ${data.reward}‡ß≥ ‡¶™‡ßá‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡¶®!`);
                    
                    // Update UI
                    currentUser.stats.balance += data.reward;
                    currentUser.stats.ads_watched_today = data.ads_watched;
                    currentUser.stats.today_earnings += data.reward;
                    
                    updateDashboard();
                    
                    // Start cooldown timer
                    const cooldown = config.ad_cooldown;
                    let timeLeft = cooldown;
                    
                    timerDiv.style.display = 'block';
                    
                    const timer = setInterval(() => {
                        timeLeft--;
                        countdownSpan.textContent = timeLeft;
                        
                        if (timeLeft <= 0) {
                            clearInterval(timer);
                            timerDiv.style.display = 'none';
                            button.disabled = false;
                            button.textContent = '‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (5‡ß≥)';
                        }
                    }, 1000);
                    
                } else {
                    showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', data.message || '‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§');
                    button.disabled = false;
                    button.textContent = '‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (5‡ß≥)';
                }
                
            } catch (error) {
                showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', '‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                button.disabled = false;
                button.textContent = '‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (5‡ß≥)';
            }
        }
        
        async function loadTasks() {
            try {
                const response = await fetch('/api/tasks', {
                    headers: {
                        'X-Telegram-Init-Data': tg.initData
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const tasksList = document.getElementById('tasks-list');
                    tasksList.innerHTML = '';
                    
                    if (data.tasks.length === 0) {
                        tasksList.innerHTML = '<p class="text-center" style="opacity: 0.7;">‡¶ï‡ßã‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶®‡ßá‡¶á</p>';
                        return;
                    }
                    
                    data.tasks.forEach(task => {
                        const taskCard = document.createElement('div');
                        taskCard.className = 'task-card';
                        taskCard.innerHTML = `
                            <div class="task-title">${task.title}</div>
                            <p style="opacity: 0.8; margin-bottom: 10px;">${task.description}</p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span class="task-reward">${task.reward}‡ß≥</span>
                                ${task.completed ? 
                                    '<span style="color: #4CAF50; font-weight: bold;">‚úì ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®</span>' :
                                    `<button class="btn btn-primary" onclick="completeTask(${task.id})" style="padding: 8px 15px; font-size: 14px;">
                                        ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
                                    </button>`
                                }
                            </div>
                        `;
                        tasksList.appendChild(taskCard);
                    });
                }
            } catch (error) {
                console.error('Error loading tasks:', error);
            }
        }
        
        async function completeTask(taskId) {
            try {
                const response = await fetch(`/api/complete-task/${taskId}`, {
                    method: 'POST',
                    headers: {
                        'X-Telegram-Init-Data': tg.initData
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showAlert('‡¶∏‡¶´‡¶≤!', data.message);
                    await loadTasks(); // Reload tasks
                    await loadUserData(); // Refresh user data
                } else {
                    showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', data.message);
                }
            } catch (error) {
                showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', '‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡•§');
            }
        }
        
        async function loadRecentEarnings() {
            try {
                const response = await fetch('/api/history/earnings', {
                    headers: {
                        'X-Telegram-Init-Data': tg.initData
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const container = document.getElementById('recent-earnings');
                    container.innerHTML = '';
                    
                    if (data.history.length === 0) {
                        container.innerHTML = '<p class="text-center" style="opacity: 0.7;">‡¶ï‡ßã‡¶® ‡¶Ü‡¶Ø‡¶º‡ßá‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶®‡ßá‡¶á</p>';
                        return;
                    }
                    
                    // Show last 5 earnings
                    const recent = data.history.slice(0, 5);
                    
                    recent.forEach(earning => {
                        const div = document.createElement('div');
                        div.style.cssText = `
                            display: flex; 
                            justify-content: space-between; 
                            padding: 10px 0; 
                            border-bottom: 1px solid rgba(255,255,255,0.1);
                        `;
                        
                        div.innerHTML = `
                            <div>
                                <div>${earning.description || earning.type}</div>
                                <small style="opacity: 0.7;">${new Date(earning.created_at).toLocaleDateString('bn-BD')}</small>
                            </div>
                            <div style="color: #4CAF50; font-weight: bold;">+${earning.amount}‡ß≥</div>
                        `;
                        
                        container.appendChild(div);
                    });
                }
            } catch (error) {
                console.error('Error loading earnings:', error);
            }
        }
        
        async function loadWithdrawalHistory() {
            try {
                const response = await fetch('/api/history/withdrawals', {
                    headers: {
                        'X-Telegram-Init-Data': tg.initData
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const container = document.getElementById('withdraw-history');
                    container.innerHTML = '';
                    
                    if (data.history.length === 0) {
                        container.innerHTML = '<p class="text-center" style="opacity: 0.7;">‡¶ï‡ßã‡¶® ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶®‡ßá‡¶á</p>';
                        return;
                    }
                    
                    // Show last 5 withdrawals
                    const recent = data.history.slice(0, 5);
                    
                    recent.forEach(withdrawal => {
                        const div = document.createElement('div');
                        div.style.cssText = `
                            display: flex; 
                            justify-content: space-between; 
                            padding: 10px 0; 
                            border-bottom: 1px solid rgba(255,255,255,0.1);
                        `;
                        
                        const statusColors = {
                            'pending': '#FF9800',
                            'approved': '#4CAF50',
                            'rejected': '#F44336'
                        };
                        
                        const statusText = {
                            'pending': '‡¶Æ‡ßÅ‡¶≤‡¶§‡ßÅ‡¶¨‡¶ø',
                            'approved': '‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§',
                            'rejected': '‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶®'
                        };
                        
                        div.innerHTML = `
                            <div>
                                <div>${withdrawal.method.toUpperCase()} - ${withdrawal.account_number}</div>
                                <small style="opacity: 0.7;">${new Date(withdrawal.created_at).toLocaleDateString('bn-BD')}</small>
                            </div>
                            <div>
                                <div style="color: #2196F3; font-weight: bold; text-align: right;">${withdrawal.amount}‡ß≥</div>
                                <div style="color: ${statusColors[withdrawal.status]}; text-align: right;">${statusText[withdrawal.status]}</div>
                            </div>
                        `;
                        
                        container.appendChild(div);
                    });
                }
            } catch (error) {
                console.error('Error loading withdrawals:', error);
            }
        }
        
        async function loadHistory(type) {
            try {
                const response = await fetch(`/api/history/${type}`, {
                    headers: {
                        'X-Telegram-Init-Data': tg.initData
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const container = document.getElementById('history-content');
                    container.innerHTML = '<h4>' + (type === 'earnings' ? '‡¶Ü‡¶Ø‡¶º‡ßá‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏' : '‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏') + '</h4>';
                    
                    if (data.history.length === 0) {
                        container.innerHTML += '<p class="text-center" style="opacity: 0.7;">‡¶ï‡ßã‡¶® ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡ßá‡¶á</p>';
                        return;
                    }
                    
                    data.history.forEach(item => {
                        const div = document.createElement('div');
                        div.style.cssText = `
                            background: rgba(255,255,255,0.1); 
                            padding: 15px; 
                            border-radius: 10px; 
                            margin: 10px 0;
                        `;
                        
                        if (type === 'earnings') {
                            div.innerHTML = `
                                <div style="display: flex; justify-content: space-between;">
                                    <div>
                                        <strong>${item.description || item.type}</strong><br>
                                        <small>${new Date(item.created_at).toLocaleString('bn-BD')}</small>
                                    </div>
                                    <div style="color: #4CAF50; font-weight: bold;">+${item.amount}‡ß≥</div>
                                </div>
                            `;
                        } else {
                            const statusColors = {
                                'pending': '#FF9800',
                                'approved': '#4CAF50',
                                'rejected': '#F44336'
                            };
                            
                            const statusText = {
                                'pending': '‡¶Æ‡ßÅ‡¶≤‡¶§‡ßÅ‡¶¨‡¶ø',
                                'approved': '‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§',
                                'rejected': '‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶®'
                            };
                            
                            div.innerHTML = `
                                <div style="display: flex; justify-content: space-between;">
                                    <div>
                                        <strong>${item.method.toUpperCase()} - ${item.account_number}</strong><br>
                                        <small>${new Date(item.created_at).toLocaleString('bn-BD')}</small>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="color: #2196F3; font-weight: bold;">${item.amount}‡ß≥</div>
                                        <div style="color: ${statusColors[item.status]};">${statusText[item.status]}</div>
                                    </div>
                                </div>
                            `;
                        }
                        
                        container.appendChild(div);
                    });
                }
            } catch (error) {
                console.error('Error loading history:', error);
            }
        }
        
        function copyReferralLink() {
            const linkElement = document.getElementById('referral-link');
            const link = linkElement.textContent;
            
            navigator.clipboard.writeText(link).then(() => {
                showAlert('‡¶∏‡¶´‡¶≤!', '‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = link;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showAlert('‡¶∏‡¶´‡¶≤!', '‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            });
        }
        
        function setupEventListeners() {
            // Withdraw form submission
            const withdrawForm = document.getElementById('withdraw-form');
            if (withdrawForm) {
                withdrawForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const amount = parseFloat(document.getElementById('withdraw-amount').value);
                    const method = document.getElementById('withdraw-method').value;
                    const account = document.getElementById('withdraw-account').value;
                    
                    // Validation
                    if (amount < config.min_withdraw) {
                        showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', `‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ${config.min_withdraw}‡ß≥`);
                        return;
                    }
                    
                    if (!method) {
                        showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', '‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®');
                        return;
                    }
                    
                    if (!account || account.length < 11) {
                        showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', '‡¶∏‡¶†‡¶ø‡¶ï ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®');
                        return;
                    }
                    
                    // Check balance
                    if (amount > currentUser.stats.balance) {
                        showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', '‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á');
                        return;
                    }
                    
                    // Submit withdrawal
                    showLoading();
                    
                    try {
                        const response = await fetch('/api/withdraw', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-Telegram-Init-Data': tg.initData
                            },
                            body: JSON.stringify({
                                method: method,
                                amount: amount,
                                account_number: account
                            })
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            showAlert('‡¶∏‡¶´‡¶≤!', data.message);
                            withdrawForm.reset();
                            
                            // Update balance
                            currentUser.stats.balance -= amount;
                            updateDashboard();
                            
                            // Reload withdrawal history
                            await loadWithdrawalHistory();
                        } else {
                            showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', data.message);
                        }
                    } catch (error) {
                        showAlert('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø', '‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                    } finally {
                        hideLoading();
                    }
                });
            }
        }
        
        // Navigation Functions
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            const section = document.getElementById(sectionId + '-section');
            if (section) {
                section.style.display = 'block';
            }
            
            // Add active class to clicked nav item
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach((item, index) => {
                if (item.textContent.includes(getNavText(sectionId))) {
                    item.classList.add('active');
                }
            });
        }
        
        function getNavText(sectionId) {
            const map = {
                'home': '‡¶π‡ßã‡¶Æ',
                'earn': '‡¶Ü‡¶Ø‡¶º',
                'referral': '‡¶∞‡ßá‡¶´‡¶æ‡¶∞',
                'wallet': '‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶ü',
                'withdraw': '‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®',
                'profile': '‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤'
            };
            return map[sectionId] || '';
        }
        
        // UI Helper Functions
        function showAlert(title, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert alert-success';
            alertDiv.innerHTML = `
                <h4>${title}</h4>
                <p>${message}</p>
            `;
            
            const container = document.getElementById('alert-container');
            container.appendChild(alertDiv);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }
        
        function showError(message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert alert-error';
            alertDiv.innerHTML = `<p>${message}</p>`;
            
            const container = document.getElementById('alert-container');
            container.appendChild(alertDiv);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }
        
        function showLoading() {
            document.getElementById('loading').style.display = 'flex';
        }
        
        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }
        
        function showTerms() {
            tg.showAlert('‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ ‡¶ì ‡¶∂‡¶∞‡ßç‡¶§‡¶æ‡¶¨‡¶≤‡ßÄ:\n\n1. ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶∑‡¶ø‡¶¶‡ßç‡¶ß\n2. ‡¶´‡ßá‡¶ï ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶°‡¶ø‡¶ü‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡¶≤‡ßá ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¨‡¶®‡ßç‡¶ß\n3. ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá ‡ß®‡ß™-‡ß™‡ßÆ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶≤‡¶æ‡¶ó‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá\n4. ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ø‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®');
        }
        
        function logout() {
            tg.showConfirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?', (confirmed) => {
                if (confirmed) {
                    tg.close();
                }
            });
        }
        
        // Admin panel detection (simple)
        if (tg.initDataUnsafe.user && tg.initDataUnsafe.user.id) {
            const userId = tg.initDataUnsafe.user.id;
            const adminIds = [633765043, 6375918223];
            
            if (adminIds.includes(userId)) {
                // Add admin section to nav
                const navBar = document.querySelector('.nav-bar');
                const adminNav = document.createElement('a');
                adminNav.href = '#';
                adminNav.className = 'nav-item';
                adminNav.onclick = () => window.location.href = '/admin';
                adminNav.innerHTML = '<span class="nav-icon">üëë</span><span>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®</span>';
                navBar.appendChild(adminNav);
            }
        }
    </script>
</body>
</html>
